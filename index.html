<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> 
<link rel="stylesheet" href="./build/static/css/bootstrap.min.css">
<link rel="stylesheet" href="./build/static/css/style.css">
<script type="text/javascript" src="./build/static/js/bootstrap.js"></script>
<script type="text/javascript" src="./build/static/js/bootstrap.min.js"></script>
<script type="text/javascript" src="./build/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="http://cdn.grapecity.com/spreadjs/hosted/scripts/gc.spread.sheets.all.14.1.1.min.js"></script>
<script type="text/javascript" src="http://cdn.grapecity.com/spreadjs/hosted/scripts/interop/gc.spread.excelio.14.1.1.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.8.0/jszip.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.8.0/xlsx.js"></script>
<!-- <script type="text/javascript" src="/socket.io/socket.io.js"></script> -->
<!-- <script type="text/javascript" src="./build/build.js"></script> -->
</head>
<body data-alreadt="162212176"></body>
<div id="root">
    <div class="header">
        <div class="header-item">
            <img class="header-item-image" id="logo" src="./build/static/img/names_from_the_multiverse_logo.png" alt="logo" class="rounded float-left">
        </div>
        <div class="header-item">
            <span class="header-item-text">Names from the multiverse</span>
        </div>
    </div>
    <div class="body">
        <div class="body-text">
            <span class="body-text-item">In a parallel universe, the Western</span>
            <span class="body-text-item">world and the Arab world are swapped.</span>
            <span class="body-text-item" style="color: #5561d9">Type here to discover your alternative</span>
            <span class="body-text-item" style="color: #5561d9">arabicized name !</span>
        </div>
    </div>
    <div class="form">
        <div class="form-item">
            <span class="form-item-label">Current first name : </span>
        </div>
        <div class="form-item">
            <input id="first-name" class="form-item-input" type="text" placeholder="FranÃ§ois, Ashley, Karim ...">
            <button id="button-search" class="btn btn-primary" onclick="search()">Search</button>
        </div>
    </div>
    <div class="bottom">
        <div class="numbers">
            <span class="number-window">
                <span class="number-window-item" data-val="161">000</span>
            </span>
            <span class="number-window">
                <span class="number-window-item" data-val="781">000</span>
            </span>
            <span class="number-window">
                <span class="number-window-item" data-val="590">000</span>
            </span>
            <span style="font-size: large">names have already been obtained.</span>
        </div>
    </div>
    <div class="bottom-result">
        <span id="bottom-result-1"></span>
        <div class="bottom-result-item">
            <div>
                <span id="bottom-result-2"></span>
            </div>
            <div>
                <span id="bottom-result-3"></span>
            </div>
        </div>
    </div>
    <footer class="footer">
        <a href="https://getfireshot.com/pdf_bWFpbHRvOnZpdGVtb25wcmVub21AZ21haWwuY29t">mpgr01@protonmail.com</a>
    </footer>
</div>
<script type="text/javascript">
    let valueDisplays = document.querySelectorAll(".number-window-item");
    let interval = 0.01;
    let i = 0;

    valueDisplays.forEach((valueDisplay) => {
        let startValue = 0;
        let endValue = parseInt(valueDisplay.getAttribute("data-val"));
        let duration = Math.floor(interval / endValue);
        let counter = setInterval(function(){
            startValue += 1;
            valueDisplay.textContent = startValue;
            if (startValue == endValue) {
                clearInterval(counter);
            }
        }, duration);
    });
    function search() {
        let first_name = document.getElementById("first-name").value;
        fetch('https://name-from-the-multiverse.herokuapp.com/find', {
            method: 'POST', // *GET, POST, PUT, DELETE, etc.
            mode: 'cors', // no-cors, *cors, same-origin
            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
            credentials: 'same-origin', // include, *same-origin, omit
            headers: {
            'Content-Type': 'application/json'
            // 'Content-Type': 'application/x-www-form-urlencoded',
            },
            redirect: 'follow', // manual, *follow, error
            referrerPolicy: 'no-referrer',
            body: JSON.stringify({name: first_name})
        }).then(response => response.json()).then(data => {
            if (data.success) {
                document.getElementById("bottom-result-1").innerHTML = "Your first name is already arabized !"
                document.getElementById("bottom-result-2").innerHTML = ""
                document.getElementById("bottom-result-3").innerHTML = ""
            }
            else {
                document.getElementById("bottom-result-1").innerHTML = "This first name is not arabized !"
                document.getElementById("bottom-result-2").innerHTML = "Your alternative first name will be : "
                document.getElementById("bottom-result-3").innerHTML = data.name
            }
        }).catch(error => console.log(error))
    }
</script>
</html>